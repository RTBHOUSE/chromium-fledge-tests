<script>
function randomVector(n) {
  const vector = new Array(n);
  for (let i = 0; i < n; i++) {
    vector[i] = Math.random();
  }
  return vector;
}

if (!navigator.joinAdInterestGroup) {
  document.write("your browser doesn't have joinAdInterestGroup -- do you need to set some flags?");
} else {
  const buyer_address = window.location.origin;
  navigator.joinAdInterestGroup({
    owner: buyer_address,
    name: "tc-ig",
    biddingLogicUrl: buyer_address + "/buyer.js",
    ads: [
      {
        renderUrl: buyer_address + "/ad.html",
        metadata: {
          input: randomVector(200),
        },
      },
    ],
  }, 10000);
  document.write("joined interest group");
}
</script>
